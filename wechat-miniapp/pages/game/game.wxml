<view class="game-container">
  <!-- æ¸¸æˆå¤´éƒ¨ -->
  <view class="header">
    <view class="title">ğŸ® è‹±è¯­å‘éŸ³å¤§ä½œæˆ˜</view>
    <view class="level-info">
      <text>ç¬¬ {{currentLevel}} å…³</text>
      <text>å¾—åˆ†: {{score}}</text>
      <text>æ”»å‡»æ¬¡æ•°: {{attackCount}}/{{maxAttacks}}</text>
    </view>
  </view>

  <!-- BOSSåŒºåŸŸ -->
  <view class="boss-area">
    <view class="boss-container">
      <view class="boss-character">{{bossEmoji}}</view>
      <view class="boss-info">
        <view class="boss-name">{{bossName}}</view>
        <view class="health-bar">
          <view class="health-fill" style="width: {{healthPercent}}%"></view>
        </view>
        <view class="health-text">{{Math.ceil(bossHealth)}} / {{Math.ceil(initialBossHealth)}}</view>
      </view>
    </view>
  </view>

  <!-- æ¸¸æˆåŒºåŸŸ -->
  <view class="game-area">
    <!-- å•è¯å¡ç‰‡ -->
    <view class="word-card">
      <view class="word-display">{{currentWord.word}}</view>
      <view class="word-phonetic">{{currentWord.phonetic}}</view>
      <button class="btn-play" bindtap="playWordAudio">ğŸ”Š æ’­æ”¾å‘éŸ³</button>
    </view>

    <!-- å½•éŸ³æ§åˆ¶ -->
    <view class="recording-controls">
      <button 
        class="btn-record {{isRecording ? 'recording' : ''}}" 
        bindtap="toggleRecording"
        disabled="{{showAccuracy}}"
      >
        {{isRecording ? 'â¹ åœæ­¢å½•éŸ³' : 'ğŸ¤ å¼€å§‹å½•éŸ³'}}
      </button>
      <view class="recording-status">{{recordingStatus}}</view>
    </view>

    <!-- å‡†ç¡®ç‡æ˜¾ç¤º -->
    <view class="accuracy-display" wx:if="{{showAccuracy}}">
      <view class="accuracy-value">{{currentAccuracy}}%</view>
      <view class="accuracy-feedback">
        âœ“ å‘éŸ³å·²è¯„åˆ†ï¼
        {{currentWord.word}} = {{currentWord.meaning}}
      </view>
      <view class="damage-info">å°†å¯¹BOSSé€ æˆ {{Math.round(currentDamage)}} ç‚¹ä¼¤å®³</view>
      <view class="accuracy-buttons">
        <button class="btn-attack" bindtap="attackBoss">âš”ï¸ æ”»å‡»</button>
        <button class="btn-retry" bindtap="retryRecording">é‡æ–°å½•åˆ¶</button>
      </view>
    </view>

    <!-- ä¸‹ä¸€é¢˜æŒ‰é’® -->
    <view class="next-buttons" wx:if="{{showNextBtn}}">
      <button class="btn-next" bindtap="nextWord">ä¸‹ä¸€é¢˜</button>
    </view>
  </view>

  <!-- æ¸¸æˆè¯´æ˜ -->
  <view class="instructions">
    ğŸ“ è§„åˆ™: å‡†ç¡®ç‡100%åˆ™å¯¹BOSSé€ æˆ20ç‚¹ä¼¤å®³ã€‚å‡†ç¡®ç‡è¶Šé«˜å¯¹BOSSçš„ä¼¤å®³å°±è¶Šé«˜ã€‚å‡»è´¥BOSSåè¿›å…¥ä¸‹ä¸€å…³ã€‚å°è‹±é›„ä»¬ï¼ŒåŠ æ²¹ï¼
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="action-buttons">
    <button class="btn-save-logout" bindtap="saveAndLogout">ğŸ’¾ ä¿å­˜å¹¶é€€å‡º</button>
    <button class="btn-leaderboard" bindtap="viewLeaderboard">ğŸ“Š æŸ¥çœ‹æ’è¡Œæ¦œ</button>
  </view>

  <!-- æ¸¸æˆç»“æŸå¼¹çª— -->
  <view class="modal" wx:if="{{showGameOver}}">
    <view class="modal-content">
      <view class="modal-title">{{gameOverTitle}}</view>
      <view class="modal-message">{{gameOverMessage}}</view>
      <view class="modal-buttons">
        <button class="btn-primary" bindtap="nextLevel" wx:if="{{canNextLevel}}">ä¸‹ä¸€å…³</button>
        <button class="btn-secondary" bindtap="restartGame">é‡æ–°å¼€å§‹</button>
      </view>
    </view>
  </view>
</view>
