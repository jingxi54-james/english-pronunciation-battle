<view class="leaderboard-page">
  <view class="leaderboard-header">
    <view class="header-title">ğŸ† æ’è¡Œæ¦œ</view>
    <button class="btn-back" bindtap="goBack">â† è¿”å›</button>
  </view>

  <view class="leaderboard-filters">
    <button 
      class="filter-btn {{filterType === 'all' ? 'active' : ''}}" 
      bindtap="setFilter"
      data-filter="all"
    >
      å…¨éƒ¨
    </button>
    <button 
      class="filter-btn {{filterType === 'grade' ? 'active' : ''}}" 
      bindtap="setFilter"
      data-filter="grade"
    >
      æŒ‰å¹´çº§
    </button>
  </view>

  <view class="grade-filter" wx:if="{{filterType === 'grade'}}">
    <picker 
      bindchange="handleGradeChange"
      value="{{gradeIndex}}"
      range="{{grades}}"
      range-key="label"
    >
      <view class="picker-select">
        {{grades[gradeIndex].label}}
      </view>
    </picker>
  </view>

  <view class="leaderboard-list">
    <view wx:if="{{leaderboard.length === 0}}" class="empty-message">
      æš‚æ— æ’è¡Œæ¦œæ•°æ®
    </view>
    
    <view wx:for="{{leaderboard}}" wx:key="id" class="leaderboard-item">
      <view class="rank rank-{{index + 1}}">{{index + 1}}</view>
      <view class="player-info">
        <view class="player-name">{{item.name}}</view>
        <view class="player-grade">{{gradeNames[item.grade]}} Â· {{item.date}}</view>
        <view class="player-stats">å‡»æ€BOSS: {{item.boss_kills || 0}} ä¸ª | å¾—åˆ†: {{item.score}} | ç”¨æ—¶: {{formatTime(item.time_taken || 0)}}</view>
      </view>
      <view class="player-score">ğŸ† {{item.boss_kills || 0}}</view>
    </view>
  </view>
</view>
