<view class="scores-page">
  <view class="scores-header">
    <view class="header-title">ğŸ“ˆ æˆç»©æ•°æ®åº“</view>
    <button class="btn-back" bindtap="goBack">â† è¿”å›</button>
  </view>

  <view class="scores-filters">
    <button 
      class="scores-filter-btn {{filterType === 'all' ? 'active' : ''}}" 
      bindtap="setFilter"
      data-filter="all"
    >
      å…¨éƒ¨æˆç»©
    </button>
    <button 
      class="scores-filter-btn {{filterType === 'grade' ? 'active' : ''}}" 
      bindtap="setFilter"
      data-filter="grade"
    >
      æŒ‰å¹´çº§
    </button>
    <button 
      class="scores-filter-btn {{filterType === 'name' ? 'active' : ''}}" 
      bindtap="setFilter"
      data-filter="name"
    >
      æŒ‰å§“å
    </button>
  </view>

  <view class="grade-filter" wx:if="{{filterType === 'grade'}}">
    <picker 
      bindchange="handleGradeChange"
      value="{{gradeIndex}}"
      range="{{grades}}"
      range-key="label"
    >
      <view class="picker-select">
        {{grades[gradeIndex].label}}
      </view>
    </picker>
  </view>

  <view class="name-filter" wx:if="{{filterType === 'name'}}">
    <input 
      class="name-input" 
      placeholder="è¾“å…¥å§“åæœç´¢..."
      value="{{searchName}}"
      bindinput="handleNameInput"
    />
  </view>

  <view class="scores-list">
    <view wx:if="{{filteredScores.length === 0}}" class="empty-message">
      æš‚æ— æˆç»©æ•°æ®
    </view>
    
    <view wx:for="{{filteredScores}}" wx:key="id" class="score-item">
      <view class="score-rank rank-{{index + 1}}">{{index + 1}}</view>
      <view class="score-details">
        <view class="score-name">{{item.name}}</view>
        <view class="score-info">{{gradeNames[item.grade]}} Â· {{item.date}}</view>
        <view class="score-info">å‡»æ€BOSS: {{item.boss_kills || 0}} ä¸ª | å¾—åˆ†: {{item.score}} | ç”¨æ—¶: {{formatTime(item.time_taken || 0)}}</view>
      </view>
      <view class="score-value">{{item.score}}</view>
    </view>
  </view>
</view>
